class LoadingBarManager{constructor(){this.options={targetEl:"body",loadingElID:"loading-bar",message:"Loading..."},this.reset()}reset(){$(this.options.targetEl).append('<div id="'+this.options.loadingElID+'">'+this.options.message+"</div>"),this.showLoading()}hideLoading(){$("#"+this.options.loadingElID).fadeOut()}showLoading(){$("#"+this.options.loadingElID).fadeIn()}}var nflLoadingBar={options:{targetEl:"body",loadingElID:"loading-bar",message:"Loading..."},init:function(){console.warn("Deprecated nflLoadingBar.init() function called!")},reset:function(){console.warn("Deprecated nflLoadingBar.reset() function called!")},hideLoading:function(){console.warn("Deprecated nflLoadingBar.hideLoading() function called!"),LoadingBarManagerInstance.hideLoading()},showLoading:function(){console.warn("Deprecated nflLoadingBar.showLoading() function called!"),LoadingBarManagerInstance.showLoading()}};class ArrestCard{constructor(t,e){if(this.row=t,this.options=e||{showName:!1,momentDate:!1,standalone:!1},this.Column_Team={column:"Team",color:"Team_hex_color",url:"Team.html",display:"Team_preffered_name",color2:"Team_hex_alt_color",useColor2:!0},this.Column_Crime={column:"Category",color:"Crime_category_color",url:"Crime.html",display:"Category"},this.Column_Player={column:"Name",color:"Team_hex_color",url:"Player.html",display:"Name",color2:"Team_hex_alt_color",useColor2:!0},this.Column_Position={column:"Position",color:"Team_hex_color",url:"Position.html",display:"Position",color2:"Team_hex_alt_color",useColor2:!0},!this.row.hasOwnProperty("Team_preffered_name"))throw"error: incorrect row definition"}getHTML(t,e){var t=t||{column:"Category",color:"Crime_category_color",url:"Crime.html",display:"Category"},e=e||{column:"Team",color:"Team_hex_color",url:"Team.html",display:"Team_preffered_name",color2:"Team_hex_alt_color",useColor2:!0},a=this.options.showName?' style="display:inline-block; visibility:visible;"':"",s=this.options.momentDate?moment(row.Date,"YYYY-MM-DD").fromNow():this.row.DaysSince+" days ago",r=['<div class="card arrest_card '+(this.options.standalone?" standalone_card":"")+'">'];return r.push('<span class="date_item" title="'+this.row.Date+'">'+s+"</span>"),r.push('<span class="name_item"'+a+'><a href="Player.html#'+this.row.Name+'">'+this.row.Name+"</a> </span>"),r.push("<br />"),r.push('<span class="crime_item" style="background-color:#'+this.row[t.color]+'">'),r.push('<a href="'+t.url+"#"+this.row[t.column]+'">'+this.row[t.display]+"</a> </span>"),r.push('<span class="team_item '+this.row[e.column]+'" style="background-color:#'+this.row[e.color]+';">'),r.push('<a href="'+e.url+"#"+this.row[e.column]+'" '+(e.useColor2?'style="color:#'+this.row[e.color2]+';"':"")+" >"+this.row[e.display]+"</a></span>"),r.push("<br />"),r.push('<span class="description_item">'+this.row.Description+"</span>"),r.push('<span class="outcome_item">'+this.row.Outcome+"</span>"),r.push("</div>"),r.join("")}}var lastUpdate="1/3/2022, 1:15:17 AM",meter_use_current_day=!0;class DataController{constructor(t,e){this.DateRangeControl=t,this.parent=e,this.data=ArrestsCacheTable;function a(t,e){return t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),Math.floor((e-t)/864e5)}this.forEach((t,e)=>{meter_use_current_day&&(this.data[e].daysSince=a(new Date(t.Date),new Date),t.daysSince=a(new Date(t.Date),new Date))}),this.data.sort(function(t,e){return t.daysSince<e.daysSince?1:t.daysSince>e.daysSince?-1:0})}forEach(t,e,a){e=e||function(){},a=a||!0;for(var s=this.data.length-1;0<=s;s--){var r=this.data[s];(!a||this.dateLimit(r,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd()))&&t(r,s)}e()}incrementMap(t,e){return t.hasOwnProperty(e)?t[e]=t[e]+1:t[e]=1,t}dateLimit(t,e,a){return new Date(t.Date)>=new Date(e)&&new Date(t.Date)<=new Date(a)}getActivePlayerArrests(t){t(["no data"])}getMostRecentArrest(t){var e,a=999999999;this.forEach(t=>{this.dateLimit(t,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&t.daysSince<a&&(a=(e=t).daysSince)},()=>{t(e)})}getTeams(t){for(var e=[],a=[],s=new Map,r=this.data.length-1;0<=r;r--){var n=this.data[r];e.push({Team:n.Team,Team_preffered_name:n.Team_preffered_name,Team_logo_id:n.Team_logo_id})}for(r=e.length-1;0<=r;r--){var i=e[r];s.has(i.Team)||(s.set(i.Team,!0),a.push(i))}t(a)}getArrestMeter(t){var a=0,s=-1,r=0,n=9e9;this.forEach((t,e)=>{r++,a+=t.DaysToLastArrest,t.DaysToLastArrest>s&&(s=t.DaysToLastArrest),t.DaysSince<n&&(n=t.DaysSince)}),a/=r,t({alltime:{record:Math.floor(s),average:Math.floor(a),raw_average:Math.floor(a)},current:{daysSince:Math.floor(n),probability:Math.exp(-1*n)/a,odds:Math.floor(1/Math.exp(-1*n/a))}})}getDonutChart(a,t,e){for(var s={},r=[],n=this.data.length-1;0<=n;n--){var i=this.data[n];t(i)&&this.dateLimit(i,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&(s=this.incrementMap(s,i[a]))}Object.keys(s).forEach(t=>{var e={};e[a]=t,e.arrest_count=s[t],r.push(e)}),e(r.sort(function(t,e){return e.arrest_count-t.arrest_count}))}getOverallChart(t,e,a,s,r){for(var n={Year:"Year",Month:"Month",Day:"Day_of_Week",DayOrder:"Day_of_Week_int",Team:"Team_preffered_name","Team Code":"Team",Conference:"Team_Conference",Division:"Team_Conference_Division",Position:"Position",Crime:"Crime_category",Season:"Season",SeasonState:"ArrestSeasonState",Measure:"arrest_count"},i=n[e],o=n[t],l=n[a],s=s,h={},c={},d={},m={},g=this.data.length-1;0<=g;g--){var p=this.data[g];this.dateLimit(p,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&(h=this.incrementMap(h,p[i]+p[o]),c=this.incrementMap(c,p[i]),d=this.incrementMap(d,p[o]),m[p[i]]=p[l])}var u=[];Object.keys(c).forEach(t=>{var e={bar:t,arrest_count:c[t]};e[l]=m[t],u.push(e)}),"DESC"==s&&l==i?u.sort(function(t,e){return e.arrest_count-t.arrest_count}):"ASC"==s&&"Day_of_Week_int"==l&&u.sort((t,e)=>t[l]-e[l]);var C=[];Object.keys(d).forEach(t=>{C.push(t)});var y=["x"];u.forEach(t=>{y.push(t.bar)});var k=[];k.push(y),Object.keys(d).forEach(e=>{var a=[e];u.forEach(t=>{t=t.bar,t=h[t+e];a.push(t=null==t?0:t)}),k.push(a)}),r({columns:k,groups:C})}getTopLists(t,e,a,s){for(var r=[],n={},i={},o={},l=[],h=[],c=[],d=this.data.length-1;0<=d;d--){var m=this.data[d];this.dateLimit(m,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&(n=this.incrementMap(n,m.Category),i=this.incrementMap(i,m.Name),o=this.incrementMap(o,m.Position))}Object.keys(n).forEach(t=>{var e={};e.Category=t,e.arrest_count=n[t],l.push(e)}),Object.keys(i).forEach(t=>{var e={};e.Name=t,e.arrest_count=i[t],h.push(e)}),Object.keys(o).forEach(t=>{var e={};e.Position=t,e.arrest_count=o[t],c.push(e)});function g(t,e){return e.arrest_count-t.arrest_count}r.push(l.sort(g).slice(t,t+5)),r.push(h.sort(g).slice(t,t+5)),r.push(c.sort(g).slice(t,t+5)),s(r)}getArrests(e,t){var a=[];this.forEach(t=>{this.dateLimit(t,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&e(t)&&a.push(t)},()=>{t(a)})}}class Utilities{constructor(){this.googleTracking=new GoogleAnalyticsManager}gaEvent(t,e,a,s,r){this.googleTracking.sendTrackEvent(a,s)}setCookieValue(t,e,a){var s=new Date;a=a||.5,s.setTime(s.getTime()+24*a*60*60*1e3);s="expires="+s.toUTCString();document.cookie=t+"="+e+"; "+s}getCookieValue(t){for(var e=t+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var r=a[s];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""}setupFacebook(){var t,e,a;window.fbAsyncInit=function(){FB.init({appId:"563956043742586",xfbml:!0,version:"v2.4"}),FB.Event.subscribe("edge.create",function(t){this.gaEvent("send","social","facebook","like",t)}),FB.Event.subscribe("edge.remove",function(t){this.gaEvent("send","social","facebook","unlike",t)}),FB.Event.subscribe("message.send",function(t){this.gaEvent("send","social","facebook","send",t)})},t=document,e="facebook-jssdk",a=t.getElementsByTagName("script")[0],t.getElementById(e)||((t=t.createElement("script")).id=e,t.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(t,a))}setupTwitter(){var t,e,a,s;window.twttr=(t=document,e="twitter-wjs",a=t.getElementsByTagName("script")[0],s=window.twttr||{},t.getElementById(e)||((t=t.createElement("script")).id=e,t.src="https://platform.twitter.com/widgets.js",a.parentNode.insertBefore(t,a),s._e=[],s.ready=function(t){s._e.push(t)}),s),twttr.ready(function(t){t.events.bind("tweet",function(t){var e;t&&(e=window.location.href,t.target&&"IFRAME"==t.target.nodeName&&(e=extractParamFromUri(t.target.src,"url")),this.gaEvent("send","social","twitter","tweet",e))})})}mobileCheck(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?!0:e}mobileAndTabletCheck(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?!0:e}extractParamFromUri(t,e){if(!t)return null;t=new RegExp("[\\?&#]"+e+"=([^&#]*)").exec(t);return null!=t?decodeURI(unescape(t[1])):null}saveCanvasAsPNG(t){t=document.getElementById(t).toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}update_hash(t){t=t||!1;var e=window.location.pathname.split("/"),e=window.location.hash||extractParamFromUri(window.location.search,"id")||e.pop()||e.pop()||"#!ID Not Set";return t!==(e=(e=(e=decodeURI(e)).replace("#!","")).replace("#",""))&&$("#pageTitle").append(e),e}SetHash(t){window.location.hash=t}}class GoogleAnalyticsManager{constructor(){this.hashervar=window.location.hash||"",this.pagePath=window.location.pathname+this.hashervar,this.loadScript(),ga("create","UA-66360026-1","auto"),this.ping()}loadScript(){var t,e,a;t=window,a=document,e="ga",t.GoogleAnalyticsObject=e,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=+new Date,e=a.createElement("script"),a=a.getElementsByTagName("script")[0],e.async=1,e.src="//www.google-analytics.com/analytics.js",a.parentNode.insertBefore(e,a)}ping(){ga("send","pageview",this.pagePath)}sendTrackEvent(t,e){arguments.length<3&&ga("send","event",t,e)}}class WebPage{constructor(){this.Utilities=new Utilities,this.StyleManager=new StyleSheetManager,this.LoadingBar=new LoadingBarManager,this.charts=[]}renderView(){}checkLoadingFinished(){}loadingFinished(){this.LoadingBar.hideLoading(),this.Utilities.setupFacebook(),this.Utilities.setupTwitter()}setupFilters(){var t=this.pageTitle.toLowerCase(),e={presets:{},date_range_object:this.dateRangeNFL};e.presets[t]={},e.presets[t][t]=this.pageID,this.FilterControl=new FiltersControl(e),$(this.FilterControl.options.dialog_element).on("FilterDialogChanged",this.renderView)}getDetailPageLink(t,e){return t.charAt(0).toUpperCase()+t.slice(1)+".html#"+e}getCrimeLink(t){return this.getDetailPageLink("Crime",t)}getPlayerLink(t){return this.getDetailPageLink("Player",t)}getTeamLink(t){return this.getDetailPageLink("Team",t)}getPositionLink(t){return this.getDetailPageLink("Position",t)}}var dateRangeNFL,IndexPageInstance,DEBUG=!1,mainChartReturned=!1,last_start_pos=0,listsReturnCount=0,listsReturned=!1,ytdChart=!1,mainChartStyleID=0,detail_page_active=!0;class IndexPage extends WebPage{constructor(){super(),this.data_controller=void 0,this.last_start_pos=0,this.detail_page_active=!0,this.MainChart={ytdChart:!1,StyleID:0,ReturnStatus:!1,buttons:[{title:"By Team",short_title:"ByTeam",id:0,ytdChart:!1,element:"#mainChartByTeamBtn"},{title:"By Year",short_title:"ByYear",id:1,ytdChart:!0,element:"#mainChartByYearBtn"},{title:"By Season",short_title:"BySeason",id:2,ytdChart:!1,element:"#mainChartBySeasonBtn"},{title:"By Day",short_title:"ByDayOfWeek",id:3,ytdChart:!0,element:"#mainChartByConfBtn"},{title:"By Division",short_title:"ByDivision",id:4,ytdChart:!0,element:"#mainChartByConfDivBtn"}]},this.Lists={ReturnStatus:!1},this.DateRangeControl=new DateRangeControl(this),this.data_controller=new DataController(this.DateRangeControl,this),this.evaluateHash(),this.changeTopChart(),this.load_top_lists("first"),this.RenderUpdateDate(),$("#dateRangeJquery").on("dateRangeChanged",t=>{this.LoadingBar.showLoading(),this.setupChart(),this.reload_top_lists()}),$("#loadMoreLists").click(this.load_top_lists_Handler),this.detail_page_active?this.data_controller.getTeams(this.RenderTeamLinks):$("#bottomTeamLinks").hide(),this.addChartButtonListeners(),this.setupNewsletter(),this.fixTopListLinks()}RenderUpdateDate(){$("#updateDateFooter").text("Updated: "+lastUpdate)}RenderTeamLinks(t){$.each(t,(t,e)=>{var a=e.Team,a="team".charAt(0).toUpperCase()+"team".slice(1)+".html#"+a;$("#bottomTeamLinks").append('<a href="'+a+"\"><span style=\"display:inline-block;width:20px;height:20px;vertical-align: text-bottom;background:url('images/NFLTeamLogos.png') 0px -"+20*e.Team_logo_id+'px;background-size:100%;"></span> '+e.Team_preffered_name+"</a> ")})}load_top_lists_Handler(t){IndexPageInstance.load_top_lists("not first",!1)}load_top_list(t,r,n,e,i,a){(a=a||!1)&&(this.last_start_pos=0);var o=[];0<t.length?$.each(t,(t,e)=>{var a='<a href="'+this.getDetailPageLink(r,e[i[0]])+'">',s="</a>";""!=r&&this.detail_page_active||(s=a=""),o.push("<li id='"+n+t+"'>"+a+"<span>"+e[i[0]]+"</span><span class='value-cell'>"+e[i[1]]+"</span>"+s+"</li>")}):a&&o.push('<li class="list-no-data-msg-item">No Data Available for this Date Range</li>'),a?$(e).html(o.join("")):$(e).append(o.join(""))}load_top_lists(t,s){t=t||"not first",s=s||!1,$(".list-no-data-msg-item").remove(),"first"!=t&&this.Utilities.googleTracking.sendTrackEvent("TopLists","Load Next Page"),this.data_controller.getTopLists(this.last_start_pos,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd(),t=>{var e=t[0],a=t[1],t=t[2];e.length+a.length+t.length<=0&&0==this.last_start_pos&&console.warn("no data returned"),this.load_top_list(e,"crime","top_crime_","#top_crimes_list",["Category","arrest_count"],s),this.load_top_list(a,"player","top_player_","#top_players_list",["Name","arrest_count"],s),this.load_top_list(t,"position","top_pos_","#top_positions_list",["Position","arrest_count"],s),this.Lists.ReturnStatus=!0,this.Lists.ReturnCount=0,this.last_start_pos=this.last_start_pos+5,this.checkLoadingFinished()})}reload_top_lists(){this.last_start_pos=0,this.load_top_lists("not first",!0)}checkLoadingFinished(){var t;!0===this.MainChart.ReturnStatus&&!0===this.Lists.ReturnStatus&&(this.Lists.ReturnStatus=!1,this.MainChart.ReturnStatus=!1,t=.5<Math.random(),this.setupArrestOMeter(t),this.setupRecentArrestCard(!t),this.loadingFinished())}setMainChartHandler(t){IndexPageInstance.setMainChart(t.data.btn)}setMainChart(t){this.MainChart.ytdChart=t.ytdChart,this.MainChart.StyleID=t.id,this.Utilities.SetHash(t.short_title),this.changeTopChart(),this.Utilities.googleTracking.sendTrackEvent("mainChart","switchTo"+t.short_title)}addChartButtonListeners(){for(var t=0;t<this.MainChart.buttons.length;t++)$(this.MainChart.buttons[t].element).click({btnID:t,btn:this.MainChart.buttons[t]},this.setMainChartHandler)}changeTopChart(){this.setupChart(),this.changeChartButtonStyle()}changeChartButtonStyle(){1==this.MainChart.StyleID?($(".mainChartBtn").removeClass("button-primary"),$("#mainChartByYearBtn").addClass("button-primary")):0==this.MainChart.StyleID?($(".mainChartBtn").removeClass("button-primary"),$("#mainChartByTeamBtn").addClass("button-primary")):2==this.MainChart.StyleID?($(".mainChartBtn").removeClass("button-primary"),$("#mainChartBySeasonBtn").addClass("button-primary")):3==this.MainChart.StyleID?($(".mainChartBtn").removeClass("button-primary"),$("#mainChartByConfBtn").addClass("button-primary")):4==this.MainChart.StyleID&&($(".mainChartBtn").removeClass("button-primary"),$("#mainChartByConfDivBtn").addClass("button-primary"))}setupChart(){0<this.charts.length&&void 0!==this.charts[0]&&this.charts[0].hasOwnProperty("stackedChart")&&void 0!==this.charts[0].stackedChart&&this.charts[0].stackedChart.destroy(),this.getOverallChartData(t=>{this.charts[0]=stackedBarChart.init({data:t,targetElement:"#chart",targetExpandBtn:"#details_summary_btn",hideBtn:"#hideAll_btn",showBtn:"#showAll_btn"},this),this.MainChart.ReturnStatus=!0,this.checkLoadingFinished()})}getOverallChartData(t){0==this.MainChart.StyleID?this.data_controller.getOverallChart("Crime","Team Code","Team Code","DESC",t):1==this.MainChart.StyleID?this.data_controller.getOverallChart("Crime","Year","Year","ASC",t):3==this.MainChart.StyleID?this.data_controller.getOverallChart("Crime","Day","DayOrder","ASC",t):2==this.MainChart.StyleID?this.data_controller.getOverallChart("SeasonState","Season","Season","ASC",t):4==this.MainChart.StyleID&&this.data_controller.getOverallChart("Division","Year","Year","ASC",t)}setMainChartYTD(t){this.MainChart.ytdChart=t}setMainChartStyleID(t){this.MainChart.StyleID=t}evaluateHash(){window.location.hash&&("#ByYear"==window.location.hash?this.MainChart.StyleID=1:"#BySeason"==window.location.hash?this.MainChart.StyleID=2:"#ByDayOfWeek"==window.location.hash?this.MainChart.StyleID=3:"#ByDivision"==window.location.hash?this.MainChart.StyleID=4:this.MainChart.StyleID=0)}setupArrestOMeter(r){this.data_controller.getArrestMeter(function(t){var e=t.current.daysSince,a=t.alltime.record,s=t.alltime.average,t=parseInt(e)/a;$("#arrest_meter_text").html("It has been <b>"+e+"</b> Days since the last arrest.</p>"),$("#arrest_meter_subtext").html("Average: <b>"+s+"</b> Days | Record W/O arrest: <b>"+a+"</b> Days"),$(".recordHolder").html(a),$(".avgRecord").html(s).css({left:parseInt(s)/parseInt(a)*100+"%"}),$(".meter-fg").animate({width:100*t+"%"},1750),r?ga("set","dimension1","Recent"):$("#arrest-o-meter").hide()})}setupRecentArrestCard(t){this.data_controller.getMostRecentArrest(function(t){t=new ArrestCard(t,{showName:!0,standalone:!0});$("#mostRecentArrestCard").html(t.getHTML())}),t?ga("set","dimension1","ArrestOMeter"):$("#recent-arrest-card").hide()}setupNewsletter(){$("#newsletterForm").submit(t=>{t.preventDefault(),$.ajax({url:"http://patrickmurphywebdesign.com/Projects/emails/emailList.php",type:"POST",data:{email:$("input[name=email]").val()}}),$("#newsletterForm").html("<p>Thanks for Subscribing! Expect Emails when Players are arrested or when records are broken!</p>"),this.Utilities.googleTracking.sendTrackEvent("Email List","Subscribe")}),$("#newsletterForm input[name=email]").focus(()=>{this.Utilities.googleTracking.sendTrackEvent("Email List","Focus")}),$("#newsletterDisplayBtn").click(()=>{$("#newsletterContainer").css("display","block"),$("#newsletterDisplayBtn").css("display","none"),this.Utilities.googleTracking.sendTrackEvent("Email List","MobileShowForm")})}fixTopListLinks(){detail_page_active&&$(".top-list ol li").click(function(){return window.location=$(this).find("a").attr("href"),!1})}}$(window).load(function(){IndexPageInstance=new IndexPage});var isFirstHover=!0,stackedBarChart={stackedChart:void 0,options:{targetElement:"#theElementSelector",targetExpandBtn:"#btnSelector",showBtn:"#btnSelector",hideBtn:"#btnSelector",data:{},isExpanded:!1,customLegend:!0,zoomEnabled:!1},init:function(t,e){this.parent=e,this.options.data={},$.extend(!0,this.options,t);t=this;t.options.$targetElement=$(this.options.targetElement),t.options.$expandBtnElement=$(this.options.targetExpandBtn),t.options.$showBtnElement=$(this.options.showBtn),t.options.$hideBtnElement=$(this.options.hideBtn),stackedBarChart.options.$expandBtnElement.off("click"),stackedBarChart.options.$expandBtnElement.click(t.toggleExpand),stackedBarChart.options.$hideBtnElement.click(t.hideAllCategories),stackedBarChart.options.$showBtnElement.click(t.showAllCategories),t.renderChart()},renderChart:function(){var t;t=$(document).width()<800?20:6,stackedBarChart.stackedChart=c3.generate({bindto:stackedBarChart.options.targetElement,data:{empty:{label:{text:"No Data Available for this Date Range"}},x:"x",columns:stackedBarChart.options.data.columns,groups:[stackedBarChart.options.data.groups],order:"asc",type:"bar",onclick:(t,e)=>{void 0!==mainChartStyleID&&0==mainChartStyleID&&detail_page_active&&(stackedBarChart.parent.Utilities.googleTracking.sendTrackEvent("mainChart","teamLink"),setTimeout(()=>{window.location.href="Team.html#"+stackedBarChart.options.data.columns[0][t.index+1]},100))}},zoom:{enabled:stackedBarChart.options.zoomEnabled},padding:{bottom:t},legend:{show:!stackedBarChart.options.customLegend},axis:{x:{type:"category"}},color:{pattern:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF","#154F78","#B0580A","#248224","#7D1717"]}}),stackedBarChart.options.customLegend&&stackedBarChart.renderCustomLegend()},renderCustomLegend:function(){$(".customLegend").remove(),d3.select(".chart-container").insert("div",".chart-options").attr("class","customLegend").selectAll("span").data(stackedBarChart.options.data.groups).enter().append("span").attr("data-id",function(t){return t}).attr("class",function(t){return"customLegend-item customLegend-item-"+t.replace("/","").split(" ").join("")}).html(function(t){return'<span class="customLegend-item-color" style="background-color:'+stackedBarChart.stackedChart.color(t)+';"></span> '+t}).on("mouseover",function(t){stackedBarChart.stackedChart.focus(t),isFirstHover&&(isFirstHover=!1,stackedBarChart.parent.Utilities.googleTracking.sendTrackEvent("mainChart","legendMouseover"))}).on("mouseout",function(t){stackedBarChart.stackedChart.revert()}).on("click",t=>{stackedBarChart.stackedChart.toggle(t);t=(t=t.replace("/","")).split(" ").join(""),t=d3.select(".customLegend-item-"+t);t.classed("transparent",!t.classed("transparent")),stackedBarChart.parent.Utilities.googleTracking.sendTrackEvent("mainChart","legendClick")})},toggleExpand:()=>{stackedBarChart.options.$targetElement.toggleClass("expanded"),stackedBarChart.options.isExpanded=!stackedBarChart.options.isExpanded,stackedBarChart.options.isExpanded?stackedBarChart.options.$expandBtnElement.html("Collapse"):stackedBarChart.options.$expandBtnElement.html("Expand"),stackedBarChart.parent.Utilities.googleTracking.sendTrackEvent("mainChart","expand toggle"),stackedBarChart.renderChart()},hideAllCategories:()=>{stackedBarChart.stackedChart.hide(),stackedBarChart.parent.Utilities.googleTracking.sendTrackEvent("mainChart","hideAll"),$(".customLegend-item").addClass("transparent")},showAllCategories:()=>{stackedBarChart.stackedChart.show(),stackedBarChart.parent.Utilities.googleTracking.sendTrackEvent("mainChart","showAll"),$(".customLegend-item").removeClass("transparent")}};class DateRangeControl{constructor(t){this.start_date="2000-01-01",this.end_date="",this.parent=t,this.setHash(),this.setupDateRangePicker(),this.setupDateRangePickerEvents()}setupDateRangePicker(t){var t=[{text:"Last 3 Months",dateStart:()=>moment().subtract("months",3),dateEnd:()=>moment()},{text:"Last 6 Months",dateStart:()=>moment().subtract("months",6),dateEnd:()=>moment()},{text:"Last Year",dateStart:()=>moment().subtract("years",1),dateEnd:()=>moment()},{text:"Last 5 Years",dateStart:()=>moment().subtract("years",5),dateEnd:()=>moment()},{text:"All Records",dateStart:()=>moment("2000-01-01"),dateEnd:()=>moment()}],e=this.parent.Utilities.mobileCheck()?1:2;$("#dateRangeJquery").daterangepicker({presetRanges:t,datepickerOptions:{minDate:new Date("2000-01-01"),maxDate:0,numberOfMonths:e}})}setupDateRangePickerEvents(){this.setDefaultDate();var t={start:moment(this.start_date).toDate(),end:moment(this.end_date).toDate()};$("#dateRangeJquery").daterangepicker("setRange",t),$("#dateRangeJquery").on("change",()=>{this.changeDateRange(this)}),$("#dateRangeJquery").on("open",()=>this.parent.Utilities.googleTracking.sendTrackEvent("DateRange","OpenDialog"))}open(){$("#dateRangeJquery").daterangepicker("open")}close(){$("#dateRangeJquery").daterangepicker("close")}resetTime(t){this.parent.Utilities.googleTracking.sendTrackEvent("DateRange","Reset");var e=this.getToday();this.setDates("2000-01-01",e)}setDefaultDate(){var t=moment().format("YYYY-MM-DD");this.start_date=this.getCookie("start_date")||"2000-01-01",this.end_date=this.getCookie("end_date")||t}getToday(){var t=new Date,e=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate();return t.getFullYear()+"-"+e+"-"+a}getStart(){return this.start_date}getEnd(){return this.end_date}setHash(){}changeDateRange(t){var e=JSON.parse($("#dateRangeJquery").val()),a=e.start,s=e.end;new Date(a)>new Date(s)&&(e=a,a=s,s=e),t.setDates(a,s)}setDates(t,e){this.setCookie("start_date",t),this.setCookie("end_date",e),this.start_date=t,this.end_date=e,window.CustomEvent&&(new Event("dateRangeChanged"),$("#dateRangeJquery").trigger("dateRangeChanged"),this.parent.Utilities.googleTracking.sendTrackEvent("DateRange","DateChanged"))}setCookie(t,e,a){return this.parent.Utilities.setCookieValue(t,e,a)}getCookie(t){return this.parent.Utilities.getCookieValue(t)}}class StyleSheetManager{constructor(){this.stylesheets=["css/styles.min.css","css/vendor/normalize.min.css","css/vendor/skeleton.min.css","css/vendor/c3.css","css/vendor/jquery-ui.min.css","css/vendor/jquery.comiseo.daterangepicker.css"],this.loadStylesheets()}loadCSS(t){var e,a;return e=document,a=e.createElement("LINK"),e=e.getElementsByTagName("LINK")[0],a.href=t,a.rel="stylesheet",e.parentNode.insertBefore(a,e),!0}loadStylesheets(t){for(var e=t||this.stylesheets||[],a=!0,s=0;s<e.length;s++)a=this.loadCSS(e[s]),DEBUG&&console.log(e[s]+" Loaded");return a}}var StyleSheetManagerInstance=new StyleSheetManager;function loadCSS(t){DEBUG&&console.warn("Deprecated loadCSS("+t+") function called!"),StyleSheetManagerInstance.loadCSS(t)}