







var DEBUG=false

;class WebPage{constructor(
e,t){
this.Utilities=new Utilities
;this.StyleManager=new StyleSheetManager
;this.LoadingBar=new LoadingBarManager

;this.pageTitle=e||"Default"
;this.option_HideLoadingBar=t===true?true:false

;this.arrest_view_mode=0;if(

this.Utilities.mobileCheck()){
this.arrest_view_mode=1
;moment.locale("en",{relativeTime:{

future:"in %s",
past:"%s ago",
s:"a few secs",
ss:"%d secs",
m:"a min",
mm:"%d mins",
h:"an hr",
hh:"%d hrs",
d:"a day",
dd:"%d day",
w:"a wk",
ww:"%d wks",
M:"a mth",
MM:"%d mths",
y:"a yr",
yy:"%d yrs"}})}if(





this.option_HideLoadingBar){
this.LoadingBar.hideLoading()}



this.charts=[]
;this.Modules_HashMap={}


;this.RenderUpdateDate()}renderView(){



this.renderModules()}RenderUpdateDate(){




var e=lastUpdate.split(",")[0]

;$("#updateDateFooter").html("Updated: "+e+' <a href="BuildHistory.html">v'+lastVersion+"</a>")}checkLoadingFinished(){




console.warn("Default WebPage.js checkLoadingFinished() function called, should be overriden within a subclass")

;this.loadingFinished()}loadingFinished(){



this.LoadingBar.hideLoading()


;this.Utilities.setupFacebook()
;this.Utilities.setupTwitter()}getModuleCount(){




return Object.keys(this.Modules_HashMap).length}getModules(){



return this.Modules_HashMap}getModule(


e){if(
this.Modules_HashMap.hasOwnProperty(e)){
return this.Modules_HashMap[e]}else{

console.error("No Module with the moduleID: "+e)
;return false}}setModules(



e){if(
Object.isObject(mObj)){
this.Modules_HashMap=mObj}else{

console.warn('WebPage.setModules(mObj): Expected Parameter(mObj) to be of type Object that should be formatted as a HashMap eg: [{"Key": ModuleInstance, "Key2": ModuleInstance2}].')}}addModule(



e,t){
t=t||"Module_"+e.getModuleID()+"_"+this.getModuleCount()
;this.Modules_HashMap[t]=e
;return t}removeModule(


e){if(
this.Modules_HashMap[e]){
delete this.Modules_HashMap[e]}else{

console.warn("No such module found",e)}}renderModules(){if(




this.getModuleCount()>0){
var e=Object.keys(this.Modules_HashMap);for(
var t=0;t<e.length;t++){
this.Modules_HashMap[e[t]].renderView()}}}getHTMLDateTitleAttribute(






e,t){if(
typeof e!=="undefined"){
var s=t||"Date";if(
e.hasOwnProperty(s)){
return'title="'+e[s].split("T")[0]+'"'}else{

console.error("WebPage > getHTMLDateTitleAttribute: Row did not contain ["+s+"].")
;return""}}else{


return""}}getDetailPageLink(




e,t){
return e.charAt(0).toUpperCase()+e.slice(1)+".html#"+t}getCrimeLink(


e){
return this.getDetailPageLink("CrimeCategory",e)}getCrimeSubCategoryLink(


e){
return this.getDetailPageLink("Crime",e)}getPlayerLink(


e){
return this.getDetailPageLink("Player",e)}getTeamLink(


e){
return this.getDetailPageLink("Team",e)}getPositionLink(


e){
return this.getDetailPageLink("Position",e)}displayDialogBox(


e,t,s,a){
var i=e||"error-dialog"
;var t=t||"Error! No Message found."
;var s=s||"Error"
;var a=a||{modal:true};if(


$("#"+i).length===0){
$("body").append('<div id="'+i+'" title="'+s+'">'+t+"</div>")}

$("#"+i).dialog(a)
;this.Utilities.googleTracking.sendTrackEvent("PageDialogOpen",s)}}var DATA_MODEL_FRAMEWORK_MONTHS_VALUES_ARRAY=[{COLUMN_NAME:"months",COLUMN_VALUE:1,COLUMN_DISPLAY_VALUE:"January"},{COLUMN_NAME:"months",COLUMN_VALUE:2,COLUMN_DISPLAY_VALUE:"February"},{COLUMN_NAME:"months",COLUMN_VALUE:3,COLUMN_DISPLAY_VALUE:"March"},{COLUMN_NAME:"months",COLUMN_VALUE:4,COLUMN_DISPLAY_VALUE:"April"},{COLUMN_NAME:"months",COLUMN_VALUE:5,COLUMN_DISPLAY_VALUE:"May"},{COLUMN_NAME:"months",COLUMN_VALUE:6,COLUMN_DISPLAY_VALUE:"June"},{COLUMN_NAME:"months",COLUMN_VALUE:7,COLUMN_DISPLAY_VALUE:"July"},{COLUMN_NAME:"months",COLUMN_VALUE:8,COLUMN_DISPLAY_VALUE:"August"},{COLUMN_NAME:"months",COLUMN_VALUE:9,COLUMN_DISPLAY_VALUE:"September"},{COLUMN_NAME:"months",COLUMN_VALUE:10,COLUMN_DISPLAY_VALUE:"October"},{COLUMN_NAME:"months",COLUMN_VALUE:11,COLUMN_DISPLAY_VALUE:"November"},{COLUMN_NAME:"months",COLUMN_VALUE:12,COLUMN_DISPLAY_VALUE:"December"}];var DATA_MODEL_FRAMEWORK_DAY_OF_WEEK_VALUES_ARRAY=[{COLUMN_NAME:"day_of_week",COLUMN_VALUE:1,COLUMN_DISPLAY_VALUE:"Monday"},{COLUMN_NAME:"day_of_week",COLUMN_VALUE:2,COLUMN_DISPLAY_VALUE:"Tuesday"},{COLUMN_NAME:"day_of_week",COLUMN_VALUE:3,COLUMN_DISPLAY_VALUE:"Wednesday"},{COLUMN_NAME:"day_of_week",COLUMN_VALUE:4,COLUMN_DISPLAY_VALUE:"Thursday"},{COLUMN_NAME:"day_of_week",COLUMN_VALUE:5,COLUMN_DISPLAY_VALUE:"Friday"},{COLUMN_NAME:"day_of_week",COLUMN_VALUE:6,COLUMN_DISPLAY_VALUE:"Saturday"},{COLUMN_NAME:"day_of_week",COLUMN_VALUE:7,COLUMN_DISPLAY_VALUE:"Sunday"}];var DATA_MODEL_FRAMEWORK_BOOLEAN_VALUES_ARRAY=[{COLUMN_NAME:"boolean",COLUMN_VALUE:0,COLUMN_DISPLAY_VALUE:"No"},{COLUMN_NAME:"boolean",COLUMN_VALUE:1,COLUMN_DISPLAY_VALUE:"Yes"}];var DATA_MODEL_FRAMEWORK_NULLABLE_BOOLEAN_VALUES_ARRAY=[{COLUMN_NAME:"boolean",COLUMN_VALUE:0,COLUMN_DISPLAY_VALUE:"No"},{COLUMN_NAME:"boolean",COLUMN_VALUE:1,COLUMN_DISPLAY_VALUE:"Yes"},{COLUMN_NAME:"boolean",COLUMN_VALUE:2,COLUMN_DISPLAY_VALUE:"Either"}];var IndexPageInstance;class IndexPage extends DataDrivenWebPage{constructor(){super("Index");this.StyleManager.loadCSS("css/modules/styles-indexpage.css");this.StyleManager.loadCSS("css/vendor/pagination.css");this.MeterOrRecent=Math.random()>.5;this.detail_page_active=true;var e=[DATA_MODEL_DISPLAY_COLUMNS.getColumn("Date",2),DATA_MODEL_DISPLAY_COLUMNS.getColumn("Name",2),DATA_MODEL_DISPLAY_COLUMNS.getColumn("Crime_category",2),DATA_MODEL_DISPLAY_COLUMNS.getColumn("Team",1),DATA_MODEL_DISPLAY_COLUMNS.getColumn("Description",5)];var t={targetElement:"arrest_table",TitlePrefix:"Latest ",RowLimit:5,GoogleTrackingCategory:"IndexPageArrests",columns:e,RenderCardFn:e=>{var t=new ArrestCard(this,e);return t.getHTML(t.Dimension_Crime_Category,t.Dimension_Team,t.Dimension_Player)}};this.DataTable_ModuleID=this.addModule(new DataTable(this,[],t));this.MainChart=new MainChart(this);this.TopLists=new TopLists(this);this.evaluateHash();this.TopLists.fixTopListLinks();$("#loadMoreLists").click(this.TopLists.jQuery_Handler);if(this.detail_page_active){this.data_controller.getTeams(e=>{this.RenderTeamLinks(e)})}else{$("#bottomTeamLinks").hide()}}renderView(){super.renderView();this.MainChart.setupChart();this.TopLists.reload();this.data_controller.getTeams(e=>{this.RenderTeamLinks(e)})}evaluateHash(){if(window.location.hash){if(window.location.hash=="#ByYear"){this.MainChart.setStyleID(1)}else if(window.location.hash=="#BySeason"){this.MainChart.setStyleID(2)}else if(window.location.hash=="#ByDayOfWeek"){this.MainChart.setStyleID(3)}else if(window.location.hash=="#ByDivision"){this.MainChart.setStyleID(4)}else{this.MainChart.setStyleID(0)}}else{this.MainChart.setStyleID(0)}}checkLoadingFinished(){if(typeof this.MainChart!=="undefined"){if(typeof this.TopLists!=="undefined"){if(this.MainChart.getReturnStatus()&&this.TopLists.getReturnStatus()){this.TopLists.setReturnStatus(false);this.MainChart.setReturnStatus(false);this.setupArrestOMeter(this.MeterOrRecent);this.setupRecentArrestCard(!this.MeterOrRecent);this.loadingFinished()}}else{}}else{}}RenderTeamLinks(e){$("#bottomTeamLinks").html("<h4>Teams</h4>");$("#bottomTeamLinks").append('<div id="bottomTeamLinksNFC" class="row"><div id="division_NFC_West" class="three columns"><h5>NFC West</h5></div><div id="division_NFC_North" class="three columns"><h5>NFC North</h5></div><div id="division_NFC_South" class="three columns"><h5>NFC South</h5></div><div id="division_NFC_East" class="three columns"><h5>NFC East</h5></div></div>');$("#bottomTeamLinks").append('<div id="bottomTeamLinksAFC" class="row"><div id="division_AFC_West" class="three columns"><h5>AFC West</h5></div><div id="division_AFC_North" class="three columns"><h5>AFC North</h5></div><div id="division_AFC_South" class="three columns"><h5>AFC South</h5></div><div id="division_AFC_East" class="three columns"><h5>AFC East</h5></div></div>');$.each(e,(e,t)=>{var s="team";var a=t.Team;var i=s.charAt(0).toUpperCase()+s.slice(1)+".html#"+a;var r="#division_"+t.Team_Conference+"_"+t.Team_Division;var n=t.Team_preffered_name;if(this.arrest_view_mode==1){n=t.Team+" "+t.Team_name}$(r).append('<a href="'+i+"\"><span style=\"display:inline-block;width:20px;height:20px;vertical-align: text-bottom;background:url('images/NFLTeamLogos.png') 0px -"+t.Team_logo_id*20+'px;background-size:100%;"></span> '+n+" <b>"+t.Team_Arrest_Count+"</b></a> ")})}setupArrestOMeter(r){var n=true;this.data_controller.getArrestMeter(function(e){var t=e["current"]["daysSince"],s=e["alltime"]["record"],a=e["alltime"]["average"],i=parseInt(t)/s;$("#arrest_meter_text").html("It has been <b>"+t+"</b> Days since the last arrest.</p>");$("#arrest_meter_subtext").html("Average: <b>"+a+"</b> Days | Record W/O arrest: <b>"+s+"</b> Days");$(".recordHolder").html(s);$(".avgRecord").html(a).css({left:parseInt(a)/parseInt(s)*100+"%"});if(n){$(".meter-fg").animate({width:i*100+"%"},1750)}else{$(".meter-fg").width(i*100+"%")}if(!r){$("#arrest-meter").hide()}else{ga("set","dimension1","Recent")}})}setupRecentArrestCard(e){this.data_controller.getMostRecentArrest(e=>{if(e!==undefined){var t=new ArrestCard(this,e,{standalone:true});$("#mostRecentArrestCard").html(t.getHTML(t.Dimension_Crime_Category,t.Dimension_Team,t.Dimension_Player))}});if(!e){$("#recent-arrest-card").hide()}else{ga("set","dimension1","ArrestOMeter")}}}$(window).load(function(){IndexPageInstance=new IndexPage});