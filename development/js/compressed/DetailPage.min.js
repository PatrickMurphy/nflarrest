class LoadingBarManager{constructor(){this.options={targetEl:"body",loadingElID:"loading-bar",message:"Loading..."},this.reset()}reset(){$(this.options.targetEl).append('<div id="'+this.options.loadingElID+'">'+this.options.message+"</div>"),this.showLoading()}hideLoading(){$("#"+this.options.loadingElID).fadeOut()}showLoading(){$("#"+this.options.loadingElID).fadeIn()}}var nflLoadingBar={options:{targetEl:"body",loadingElID:"loading-bar",message:"Loading..."},init:function(){console.warn("Deprecated nflLoadingBar.init() function called!")},reset:function(){console.warn("Deprecated nflLoadingBar.reset() function called!")},hideLoading:function(){console.warn("Deprecated nflLoadingBar.hideLoading() function called!"),LoadingBarManagerInstance.hideLoading()},showLoading:function(){console.warn("Deprecated nflLoadingBar.showLoading() function called!"),LoadingBarManagerInstance.showLoading()}};class Utilities{constructor(){this.googleTracking=new GoogleAnalyticsManager}gaEvent(e,t,a,i,n){this.googleTracking.sendTrackEvent(a,i)}setCookieValue(e,t,a){var i=new Date;a=a||.5,i.setTime(i.getTime()+24*a*60*60*1e3);i="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+i}getCookieValue(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}setupFacebook(){var e,t,a,i;console.log("FB Setup"),window.fbAsyncInit=function(){FB.init({appId:"563956043742586",xfbml:!0,version:"v2.4"}),FB.Event.subscribe("edge.create",function(e){this.gaEvent("send","social","facebook","like",e)}),FB.Event.subscribe("edge.remove",function(e){this.gaEvent("send","social","facebook","unlike",e)}),FB.Event.subscribe("message.send",function(e){this.gaEvent("send","social","facebook","send",e)})},e=document,t="script",a="facebook-jssdk",i=e.getElementsByTagName(t)[0],e.getElementById(a)||((t=e.createElement(t)).id=a,t.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(t,i))}setupTwitter(){var e,t,a,i,n;console.log("twitter setup"),window.twttr=(e=document,t="script",a="twitter-wjs",i=e.getElementsByTagName(t)[0],n=window.twttr||{},e.getElementById(a)||((t=e.createElement(t)).id=a,t.src="https://platform.twitter.com/widgets.js",i.parentNode.insertBefore(t,i),n._e=[],n.ready=function(e){n._e.push(e)}),n),twttr.ready(function(e){e.events.bind("tweet",function(e){var t;e&&(t=window.location.href,e.target&&"IFRAME"==e.target.nodeName&&(t=extractParamFromUri(e.target.src,"url")),this.gaEvent("send","social","twitter","tweet",t),console.log("thanks for sharing",t))})})}mobileCheck(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?!0:t}mobileAndTabletCheck(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?!0:t}extractParamFromUri(e,t){if(!e)return null;e=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);return null!=e?decodeURI(unescape(e[1])):null}saveCanvasAsPNG(e){e=document.getElementById(e).toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=e}update_hash(e){e=e||!1;var t=window.location.pathname.split("/");return pageID=window.location.hash||extractParamFromUri(window.location.search,"id")||t.pop()||t.pop()||"#!ID Not Set",pageID=decodeURI(pageID),pageID=pageID.replace("#!",""),pageID=pageID.replace("#",""),e!==pageID&&$("#pageTitle").append(pageID),pageID}SetHash(e){window.location.hash=e}}class GoogleAnalyticsManager{constructor(){this.hashervar=window.location.hash||"",this.pagePath=window.location.pathname+this.hashervar,this.loadScript(),ga("create","UA-66360026-1","auto"),this.ping()}loadScript(){var e,t,a,i;e=window,t=document,i="script",a="ga",e.GoogleAnalyticsObject=a,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,a=t.createElement(i),i=t.getElementsByTagName(i)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",i.parentNode.insertBefore(a,i)}ping(){ga("send","pageview",this.pagePath)}sendTrackEvent(e,t){arguments.length<3&&ga("send","event",e,t)}}class WebPage{constructor(){this.Utilities=new Utilities,this.StyleManager=new StyleSheetManager,this.LoadingBar=new LoadingBarManager,this.charts=[]}renderView(){}checkLoadingFinished(){}loadingFinished(){this.LoadingBar.hideLoading(),this.Utilities.setupFacebook(),this.Utilities.setupTwitter()}setupFilters(){var e=this.pageTitle.toLowerCase(),t={presets:{},date_range_object:this.dateRangeNFL};t.presets[e]={},t.presets[e][e]=this.pageID,this.FilterControl=new FiltersControl(t),$(this.FilterControl.options.dialog_element).on("FilterDialogChanged",this.renderView)}getDetailPageLink(e,t){return e.charAt(0).toUpperCase()+e.slice(1)+".html#"+t}getCrimeLink(e){return this.getDetailPageLink("Crime",e)}getPlayerLink(e){return this.getDetailPageLink("Player",e)}getTeamLink(e){return this.getDetailPageLink("Team",e)}getPositionLink(e){return this.getDetailPageLink("Position",e)}}var DEBUG=!1;class DetailPage extends WebPage{constructor(e,t,a,i){super(),this.data_controller,this.pageID=e,this.pageTitle=t,this.arrestsUrl=i,this.chartOptions=a,this.arrest_view_mode=0,this.callbackReturns=0;mobileCheck()&&(this.arrest_view_mode=1),this.StyleManager.loadCSS("css/modules/styles-detailpage.css"),$(window).on("hashchange",()=>{this.renderView(this)}),this.DateRangeControl=new DateRangeControl(this),this.data_controller=new DataController(this.DateRangeControl,this),$("#dateRangeJquery").on("dateRangeChanged",()=>{this.renderView(this)}),setTimeout(()=>{this.resizeCharts()},1500),this.renderView(this)}changeTitle(e,t){t=t||this;document.title="NFL Arrest | "+e+" | List of Player Arrests",$("#pageTitle").html(t.pageTitle+": "+e)}renderView(e){e.LoadingBar.showLoading(),e.pageID=update_hash(e.pageID),e.changeTitle(),e.setupCharts(),e.renderArrests(),e.resizeCharts()}resizeCharts(){for(var e=0;e<this.charts.length;e++)this.charts[e].chart.resize()}checkLoadingFinished(){++this.callbackReturns==1+this.chartOptions.length&&(this.callbackReturns=0,this.loadingFinished())}renderArrests(){var n=this;n.data_controller.getArrests(e=>{if("Team"==n.pageTitle){if(e.Team!=n.pageID)return!1}else if("Position"==n.pageTitle){if(e.Position!=n.pageID)return!1}else if("Player"==n.pageTitle){if(e.Name!=n.pageID)return!1}else if("Crime"==n.pageTitle&&e.Category!=n.pageID)return!1;return!0},e=>{var t,a,i=[];for(a in $("body > div.container > section > div > h4").html(e.length+" Incidents:"),0==n.arrest_view_mode&&i.push(n.renderArrestRowHeader()),e)t=e[a],0==n.arrest_view_mode?i.push(n.renderArrestRow(t)):1==n.arrest_view_mode&&i.push(n.renderArrestCard(t));$("#arrest_table").html(i.join("")),n.checkLoadingFinished()})}renderArrestRowHeader(){return'<tr><th class="one column">Date:</th><th class="one column">Team:</th><th class="two columns">Name:</th><th class="one column">Crime:</th><th class="four columns">Description:</th><th class="three columns">Outcome:</th></tr>'}renderArrestRow(e){var t="<tr>";return t+='<td class="one column">'+moment(e.Date,"YYYY-MM-DD").fromNow()+"</td>",t+='<td class="one column">'+e.Team+"</td>",t+='<td class="two columns"><a href="Player.html#'+e.Name+'">'+e.Name+"</a></td>",t+='<td class="one column"><a href="Crime.html#'+e.Category+'">'+e.Category+"</a></td>",t+='<td class="four columns">'+e.Description+"</td>",t+='<td class="three columns">'+e.Outcome+"</td>",t+="</tr>"}renderArrestCard(e){return new ArrestCard(e).getHTML()}getDonutData(e,o,r,s){var l=this;l.data_controller.getDonutChart(o,e=>{if("Team"==l.pageTitle){if(e.Team!=l.pageID)return!1}else if("Position"==l.pageTitle){if(e.Position!=l.pageID)return!1}else if("Player"==l.pageTitle){if(e.Name!=l.pageID)return!1}else if("Crime"==l.pageTitle&&e.Category!=l.pageID)return!1;return!0},e=>{var t,a=[],i=0,n=["Other",0];for(t in e)++i<12?a.push([e[t][o],e[t].arrest_count]):n[1]=parseInt(n[1])+parseInt(e[t].arrest_count);a.push(n),l.checkLoadingFinished(),s(a,r)})}setupCharts(){var e,a=this;for(e in a.chartOptions){var t=a.chartOptions[e];a.getDonutData(t.url+a.pageID,t.field,e,(e,t)=>{a.charts.push(new DonutChart({data:e,targetElement:a.chartOptions[t].targetElement,chartTitle:a.chartOptions[t].title}))})}}}class FiltersModel{constructor(){this.filter_types={date_range_controller:{name:"dateRangeController",names:["start_date","end_date"],library:"NFLArrest",description:"The NFL Date Range Controller Module, contains two values",default_val:["2000-01-01",dateRangeController.getToday()],getValue:function(e,t){var a=[];return a.push(e.dateRangeNFL.start_date),a.push(e.dateRangeNFL.end_date),a},isActive:function(e,t){var a=e.dateRangeNFL.start_date!=t.type.default_val[0],t=e.dateRangeNFL.end_date!=t.type.default_val[1];return a||t}},select:{name:"select",library:"Chosen",description:"multi select field for filters, contains an array of values",default_val:null,getValue:function(e,t){return $(t.element).val()},isActive:function(e,t){return $(t.element).val()!=t.type.default_val}},checkbox_group:{name:"checkbox-group",library:"JQuery-UI",description:"a group of binary options",default_val:"all",getValue:function(e,t){var a=[];return $(t.element).map(function(e,t){$(t).prop("checked")?a.push("0"):a.push("1")}),a.join("")},isActive:function(e,t){var a=0;return $(t.element).map(function(e,t){$(t).prop("checked")||a++}),0<a}},checkbox:{name:"checkbox",library:"JQuery-UI",description:"a single binary option",default_val:!1,getValue:function(e,t){return $(t.element).prop("checked")},isActive:function(e,t){return $(t.element).prop("checked")!=t.type.default_val}}},this.filter_items={daterange:{element:"#filter-daterange-input",type:this.filter_types.date_range_controller,name:["start_date","end_date"]},month:{element:"#filter-month-input",type:this.filter_types.select,name:"month[]"},dayofweek:{element:"#filter-dayofweek-input-mon, #filter-dayofweek-input-tues, #filter-dayofweek-input-wed, #filter-dayofweek-input-thur, #filter-dayofweek-input-fri, #filter-dayofweek-input-sat, #filter-dayofweek-input-sun",type:this.filter_types.checkbox_group,name:"dayofweek"},yeartodate:{element:"#filter-yeartodate-input",type:this.filter_types.checkbox,name:"yeartodate"},season:{element:"#filter-season-input",type:this.filter_types.select,name:"season[]"},season_status:{element:"#filter-seasonStatusOn-input, #filter-seasonStatusOff-input",type:this.filter_types.checkbox_group,name:"season_status"},team:{element:"#filter-team-input",type:this.filter_types.select,name:"team[]"},conference:{element:"#filter-conference-AFC-input, #filter-conference-NFC-input",type:this.filter_types.checkbox_group,name:"conference"},division:{element:"#filter-division-input",type:this.filter_types.select,name:"division[]"},crimeCategory:{element:"#filter-crime-category-input",type:this.filter_types.select,name:"crimeCategory[]"},crime:{element:"#filter-crime-input",type:this.filter_types.select,name:"crime[]"},position:{element:"#filter-position-input",type:this.filter_types.select,name:"position[]"},position_type:{element:"#filter-position-type-input-o, #filter-position-type-input-d, #filter-position-type-input-s",type:this.filter_types.checkbox_group,name:"position_type"},player:{element:"#filter-player-input",type:this.filter_types.select,name:"player[]"}},this.filter_sections={date:{title:"Date Filters",element:"#filter-date-section",items:[this.filter_items.daterange,this.filter_items.month,this.filter_items.dayofweek,this.filter_items.yeartodate]},season:{title:"Season Filters",element:"#filter-season-section",items:[this.filter_items.season,this.filter_items.season_status]},team:{title:"Team Filters",element:"#filter-team-section",items:[this.filter_items.team,this.filter_items.conference,this.filter_items.division]},crime:{title:"Crime Filters",element:"#filter-crime-section",items:[this.filter_items.crimeCategory,this.filter_items.crime]},position:{title:"Position Filters",element:"#filter-position-section",items:[this.filter_items.position,this.filter_items.position_type]},player:{title:"Player Filters",element:"#filter-player-section",items:[this.filter_items.player]}}}}class FiltersControl{constructor(e){this.options=e||{},this.options.hidden_panels=e.hidden_panels||[],this.options.presets=e.presets||{},this.options.date_range_object=e.date_range_object||{},this.options.dialog_element_container=e.dialog_element_container||"#filter-dialog-container",this.options.dialog_element=e.dialog_element||"#filter-dialog",this.options.dialog_content_url=e.dialog_content_url||"templates/FiltersTemplateCache.html",this.filters_model=new FiltersModel,this.dateRangeNFL=this.options.date_range_object,this.first_open=!0;var t=this;$("#filters-open-button").click(function(){t.show()}),$("#filter-dialog-container").click(function(e){"filter-dialog-container"==e.target.id&&t.hide()}),this.hide()}on(e,t){e&t&&$(self.options.dialog_element).on(e,t)}show(){$(this.options.dialog_element_container).show(),this.first_open&&(this.loadDialogContents(),this.first_open=!1)}hide(){$(this.options.dialog_element_container).hide()}loadDialogContents(){var e=this;loadCSS("css/modules/styles-filters.css"),loadCSS("css/vendor/chosen.min.css"),$(e.options.dialog_element_container).load(e.options.dialog_content_url,function(){console.log("Load was performed."),e.setupView(),e.renderView()})}setupFilterPresets(){for(var e in this.options.presets){var t,a=this.options.presets[e];for(t in a){a[t];switch(t){case"team":case"crime":case"position":case"player":this.options.hidden_panels.push(t);break;default:console.log("unknown preset")}}}}setupFilterInput(e){$(".filter-chosen-multi").chosen({inherit_select_classes:!0,hide_results_on_select:!1}).change(e),$(".filter-radio-group input").checkboxradio({icon:!1}).change(e),$("#dateRangeJquery").on("dateRangeChanged",e),$(".filter-type-btn").click(function(){$(this).removeClass("filter-include filter-exclude"),"Exclude"===$(this).html()?($(this).html("Include"),$(this).addClass("filter-include")):($(this).html("Exclude"),$(this).addClass("filter-exclude"))})}setupUserInterface(){var e=this;$(".filter-section-title").click(function(){$(this).parent().children().eq(1).toggle()}),$("#filters-close-button").click(function(){$(e.options.dialog_element).trigger("FilterDialogClosed"),e.hide()}),$("#filters-apply-button").click(function(){e.apply(),console.log(e.options.dialog_element),$(e.options.dialog_element).trigger("FilterDialogChanged"),$(window).trigger("hashchange"),e.hide()}),$("#filters-clear-button").click(function(){e.reset(),$(e.options.dialog_element).trigger("FilterDialogReset")}),$("#filters-cancel-button").click(function(){e.hide()})}apply(){var e,t=this.getFilterValues();for(e in t)for(var a in t[e])setCookieValue(a,t[e][a])}reset(){for(var e in this.filters_model.filter_sections)if(this.filters_model.filter_sections.hasOwnProperty(e)){var t,a=this.filters_model.filter_sections[e].items;for(t in a)if(a.hasOwnProperty(t)){var i=a[t];if(Array.isArray(i.type.default_val)&&i.type.hasOwnProperty("names")){var n,o=0;for(n in i.type.default_val)setCookieValue(i.type.names[o],i.type.default_val[o++])}else setCookieValue(t,i.type.default_val)}}this.loadDialogContents()}onFilterChanged(e,t,a){var i=t.currentTarget.getAttribute("id"),n=i.substring(i.indexOf("-")+1,i.length),t=n.substring(0,n.lastIndexOf("-"));console.log(i,n,t),e.renderView()}setupView(){var a=this;this.setupFilterPresets(),this.setupUserInterface(),this.setupFilterInput(function(e,t){a.onFilterChanged(a,e,t)})}renderView(){var e,t=this;for(e in this.countActiveFilters(),t.options.hidden_panels)switch(t.options.hidden_panels[e]){case"team":case"crime":case"position":case"player":$(t.filters_model.filter_sections[t.options.hidden_panels[e]].element).hide()}$("#filter-daterange-input").html(t.dateRangeNFL.getStart()+"-"+t.dateRangeNFL.getEnd()),$("#filter-date-section .filter-section-title span").html(this.filters_model.filter_sections.date.active_count+"/4"),$("#filter-season-section .filter-section-title span").html(this.filters_model.filter_sections.season.active_count+"/2"),$("#filter-team-section .filter-section-title span").html(this.filters_model.filter_sections.team.active_count+"/3"),$("#filter-crime-section .filter-section-title span").html(this.filters_model.filter_sections.crime.active_count+"/2"),$("#filter-position-section .filter-section-title span").html(this.filters_model.filter_sections.position.active_count+"/2"),$("#filter-player-section .filter-section-title span").html(this.filters_model.filter_sections.player.active_count+"/1")}countActiveFilters(){for(var e in this.filters_model.filter_sections)if(this.filters_model.filter_sections.hasOwnProperty(e)){var t,a,i,n=this.filters_model.filter_sections[e];for(t in n.active_count=0,n.items)n.items.hasOwnProperty(t)&&(i=(a=n.items[t]).type.isActive(this,a),(a.active=i)&&n.active_count++)}}getFilterValues(){var e,t={};for(e in this.filters_model.filter_sections)if(this.filters_model.filter_sections.hasOwnProperty(e)){var a,i=this.filters_model.filter_sections[e].items;for(a in i)if(i.hasOwnProperty(a)){var n=i[a],o=n.name,r=n.type.getValue(this,n);if(n.active)if(t.hasOwnProperty(e)||(t[e]={}),Array.isArray(r)&&n.type.hasOwnProperty("names")){var s,l=0;for(s in r)t[e][n.type.names[l++]]=r[s]}else t[e][o]=r}}return t}getQueryString(){var e,t=this.getFilterValues(),a=[];for(e in t=Object.assign(t,this.options.presets))for(var i in t[e])if(Array.isArray(t[e][i]))for(var n in t[e][i])a.push(i+"="+t[e][i][n]);else a.push(i+"="+t[e][i]);return a.join("&")}}class DonutChart{constructor(e){this.chart=void 0,this.options={targetElement:"#theElementSelector",chartTitle:"default",data:{}},$.extend(!0,this.options,e),this.options.$targetElement=$(this.options.targetElement),this.renderChart()}renderChart(){this.chart=c3.generate({bindto:this.options.targetElement,data:{columns:this.options.data,type:"donut"},donut:{title:this.options.chartTitle},color:{pattern:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF","#154F78","#B0580A","#248224","#7D1717"]}})}}var lastUpdate="1/1/2022, 1:13:05 PM";class ArrestCard{constructor(e,t){if(this.row=e,this.options=t||{showName:!1,momentDate:!1,standalone:!1},this.Column_Team={column:"Team",color:"Team_hex_color",url:"Team.html",display:"Team_preffered_name",color2:"Team_hex_alt_color",useColor2:!0},this.Column_Crime={column:"Category",color:"Crime_category_color",url:"Crime.html",display:"Category"},this.Column_Player={column:"Name",color:"Team_hex_color",url:"Player.html",display:"Name",color2:"Team_hex_alt_color",useColor2:!0},this.Column_Position={column:"Position",color:"Team_hex_color",url:"Position.html",display:"Position",color2:"Team_hex_alt_color",useColor2:!0},!this.row.hasOwnProperty("Team_preffered_name"))throw"error: incorrect row definition"}getHTML(e,t){var e=e||{column:"Category",color:"Crime_category_color",url:"Crime.html",display:"Category"},t=t||{column:"Team",color:"Team_hex_color",url:"Team.html",display:"Team_preffered_name",color2:"Team_hex_alt_color",useColor2:!0},a=this.options.showName?' style="display:inline-block; visibility:visible;"':"",i=this.options.momentDate?moment(row.Date,"YYYY-MM-DD").fromNow():this.row.DaysSince+" days ago",n=['<div class="card arrest_card '+(this.options.standalone?" standalone_card":"")+'">'];return n.push('<span class="date_item" title="'+this.row.Date+'">'+i+"</span>"),n.push('<span class="name_item"'+a+'><a href="Player.html#'+this.row.Name+'">'+this.row.Name+"</a> </span>"),n.push("<br />"),n.push('<span class="crime_item" style="background-color:#'+this.row[e.color]+'">'),n.push('<a href="'+e.url+"#"+this.row[e.column]+'">'+this.row[e.display]+"</a> </span>"),n.push('<span class="team_item '+this.row[t.column]+'" style="background-color:#'+this.row[t.color]+';">'),n.push('<a href="'+t.url+"#"+this.row[t.column]+'" '+(t.useColor2?'style="color:#'+this.row[t.color2]+';"':"")+" >"+this.row[t.display]+"</a></span>"),n.push("<br />"),n.push('<span class="description_item">'+this.row.Description+"</span>"),n.push('<span class="outcome_item">'+this.row.Outcome+"</span>"),n.push("</div>"),n.join("")}}var meter_use_current_day=!0;class DataController{constructor(e,t){this.DateRangeControl=e,this.parent=t,this.data=ArrestsCacheTable;function a(e,t){return e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),Math.floor((t-e)/864e5)}this.forEach((e,t)=>{meter_use_current_day&&(this.data[t].daysSince=a(new Date(e.Date),new Date),e.daysSince=a(new Date(e.Date),new Date))}),this.data.sort(function(e,t){return e.daysSince<t.daysSince?1:e.daysSince>t.daysSince?-1:0})}forEach(e,t,a){t=t||function(){},a=a||!0;for(var i=this.data.length-1;0<=i;i--){var n=this.data[i];(!a||this.dateLimit(n,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd()))&&e(n,i)}t()}incrementMap(e,t){return e.hasOwnProperty(t)?e[t]=e[t]+1:e[t]=1,e}dateLimit(e,t,a){return new Date(e.Date)>=new Date(t)&&new Date(e.Date)<=new Date(a)}getActivePlayerArrests(e){e(["no data"])}getMostRecentArrest(e){var t,a=999999999;this.forEach(e=>{this.dateLimit(e,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&e.daysSince<a&&(a=(t=e).daysSince)},()=>{e(t)})}getTeams(e){for(var t=[],a=[],i=new Map,n=this.data.length-1;0<=n;n--){var o=this.data[n];t.push({Team:o.Team,Team_preffered_name:o.Team_preffered_name,Team_logo_id:o.Team_logo_id})}for(n=t.length-1;0<=n;n--){var r=t[n];i.has(r.Team)||(i.set(r.Team,!0),a.push(r))}e(a)}getArrestMeter(e){var a=0,i=-1,n=0,o=9e9;this.forEach((e,t)=>{n++,a+=e.DaysToLastArrest,e.DaysToLastArrest>i&&(i=e.DaysToLastArrest),e.DaysSince<o&&(o=e.DaysSince)}),a/=n,e({alltime:{record:Math.floor(i),average:Math.floor(a),raw_average:Math.floor(a)},current:{daysSince:Math.floor(o),probability:Math.exp(-1*o)/a,odds:Math.floor(1/Math.exp(-1*o/a))}})}getDonutChart(a,e,t){for(var i={},n=[],o=this.data.length-1;0<=o;o--){var r=this.data[o];e(r)&&this.dateLimit(r,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&(i=this.incrementMap(i,r[a]))}Object.keys(i).forEach(e=>{var t={};t[a]=e,t.arrest_count=i[e],n.push(t)}),t(n.sort(function(e,t){return t.arrest_count-e.arrest_count}))}getOverallChart(e,t,a,i,n){for(var o={Year:"Year",Month:"Month",Day:"Day_of_Week",DayOrder:"Day_of_Week_int",Team:"Team_preffered_name","Team Code":"Team",Conference:"Team_Conference",Division:"Team_Conference_Division",Position:"Position",Crime:"Crime_category",Season:"Season",SeasonState:"ArrestSeasonState",Measure:"arrest_count"},r=o[t],s=o[e],a=o[a],i=i,l={},c={},d={},h=this.data.length-1;0<=h;h--){var m=this.data[h];this.dateLimit(m,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&(l=this.incrementMap(l,m[r]+m[s]),c=this.incrementMap(c,m[r]),d=this.incrementMap(d,m[s]))}var p=[];Object.keys(c).forEach(e=>{p.push({bar:e,arrest_count:c[e]})}),"DESC"==i&&a==r&&p.sort(function(e,t){return t.arrest_count-e.arrest_count});var g=[];Object.keys(d).forEach(e=>{g.push(e)});var u=["x"];p.forEach(e=>{u.push(e.bar)});var f=[];f.push(u),Object.keys(d).forEach(t=>{var a=[t];p.forEach(e=>{e=e.bar,e=l[e+t];a.push(e=null==e?0:e)}),f.push(a)}),n({columns:f,groups:g})}getTopLists(e,t,a,i){for(var n=[],o={},r={},s={},l=[],c=[],d=[],h=this.data.length-1;0<=h;h--){var m=this.data[h];this.dateLimit(m,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&(o=this.incrementMap(o,m.Category),r=this.incrementMap(r,m.Name),s=this.incrementMap(s,m.Position))}Object.keys(o).forEach(e=>{var t={};t.Category=e,t.arrest_count=o[e],l.push(t)}),Object.keys(r).forEach(e=>{var t={};t.Name=e,t.arrest_count=r[e],c.push(t)}),Object.keys(s).forEach(e=>{var t={};t.Position=e,t.arrest_count=s[e],d.push(t)});function p(e,t){return t.arrest_count-e.arrest_count}n.push(l.sort(p).slice(e,e+5)),n.push(c.sort(p).slice(e,e+5)),n.push(d.sort(p).slice(e,e+5)),i(n)}getArrests(t,e){var a=[];this.forEach(e=>{this.dateLimit(e,this.DateRangeControl.getStart(),this.DateRangeControl.getEnd())&&t(e)&&a.push(e)},()=>{e(a)})}}function setCookieValue(e,t,a){var i=new Date;a=a||.5,i.setTime(i.getTime()+24*a*60*60*1e3);i="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+i}function getCookieValue(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}function gaEvent(e,t,a,i,n){googleTracking.sendTrackEvent(a,i)}function setupFacebook(){var e,t,a;console.log("FB Setup"),window.fbAsyncInit=function(){FB.init({appId:"563956043742586",xfbml:!0,version:"v2.4"}),FB.Event.subscribe("edge.create",function(e){gaEvent("send","social","facebook","like",e)}),FB.Event.subscribe("edge.remove",function(e){gaEvent("send","social","facebook","unlike",e)}),FB.Event.subscribe("message.send",function(e){gaEvent("send","social","facebook","send",e)})},e=document,t="facebook-jssdk",a=e.getElementsByTagName("script")[0],e.getElementById(t)||((e=e.createElement("script")).id=t,e.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(e,a))}function setupTwitter(){var e,t,a,i;console.log("twitter setup"),window.twttr=(e=document,t="twitter-wjs",a=e.getElementsByTagName("script")[0],i=window.twttr||{},e.getElementById(t)||((e=e.createElement("script")).id=t,e.src="https://platform.twitter.com/widgets.js",a.parentNode.insertBefore(e,a),i._e=[],i.ready=function(e){i._e.push(e)}),i),twttr.ready(function(e){e.events.bind("tweet",function(e){var t;e&&(t=window.location.href,gaEvent("send","social","twitter","tweet",t=e.target&&"IFRAME"==e.target.nodeName?extractParamFromUri(e.target.src,"url"):t),console.log("thanks for sharing",t))})})}function update_hash(){var e=window.location.pathname.split("/");return pageID=window.location.hash||extractParamFromUri(window.location.search,"id")||e.pop()||e.pop()||"#!ID Not Set",pageID=decodeURI(pageID),pageID=pageID.replace("#!",""),pageID=pageID.replace("#",""),$("#pageTitle").append(pageID),pageID}function extractParamFromUri(e,t){if(!e)return null;e=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);return null!=e?decodeURI(unescape(e[1])):null}function saveCanvasAsPNG(e){e=document.getElementById(e).toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=e}window.mobileCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?!0:t};var timeSeriesChart={timeChart:void 0,options:{targetElement:"#theElementSelector",compareToBtn:"#btnSelector",initColumnID:"",data:{},isExpanded:!(window.mobileAndTabletCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?!0:t}),showAccumulation:!1,ajaxURL:"/api/"},init:function(e){$.extend(!0,this.options,e);var t=this;console.log("Initialize Chart:  "+this.options.targetElement),t.options.$targetElement=$(this.options.targetElement),t.options.$expandBtnElement=$(this.options.targetExpandBtn),timeSeriesChart.options.$expandBtnElement.off("click"),timeSeriesChart.options.$expandBtnElement.click(function(){t.toggleExpand(t)}),t.renderChart()},renderChart:function(){var e;e=$(document).width()<800?20:6,timeSeriesChart.timeChart=c3.generate({bindto:timeSeriesChart.options.targetElement,data:{x:"x",columns:[timeSeriesChart.getXDates(),timeSeriesChart.fillDates(timeSeriesChart.options.initColumnID,timeSeriesChart.options.data)]},axis:{x:{type:"timeseries",tick:{format:"%m/%y"}}},padding:{bottom:e},color:{pattern:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF","#154F78","#B0580A","#248224","#7D1717"]}})},buildAjaxURL:function(e,t){t=t||{};var a,i,n={id:e,start_date:dateRangeController.getStart(),end_date:dateRangeController.getEnd()};for(i in $.extend(n,t),a=timeSeriesChart.options.ajaxURL.indexOf("?")<0?"?":"&",n)a+=i+"="+n[i]+"&";return a=a.substring(0,a.length-1),timeSeriesChart.options.ajaxURL+a},addColumn:function(t){googleTracking.sendTrackEvent("TimeChart","addCompare "+t);var e=timeSeriesChart.buildAjaxURL(t);$.getJSON(e,function(e){e=timeSeriesChart.fillDates(t,e);e[0];timeSeriesChart.timeChart.load({columns:[e]})})},fillDates:function(e,t){e=e||"",t=(t=t||[]).reverse();for(var a,i=new Date(dateRangeController.getStart()),n=new Date(dateRangeController.getEnd()),n=12*(n.getFullYear()-i.getFullYear())+(n.getMonth()-i.getMonth())+1,o=i.getFullYear(),r=i.getMonth()+1,s=[e.toString()],l=0,c=t.pop(),d=n;0<d;d--)void 0!==c?(12<++r&&(o++,r%=12),c.Year==o.toString()&&c.Month==r.toString()?(a=timeSeriesChart.options.showAccumulation?l+=parseInt(c.arrest_count):parseInt(c.arrest_count),s.push(a),0<t.length&&(c=t.pop())):(a=timeSeriesChart.options.showAccumulation?l:0,s.push(a))):s.push(0);return s},getXDates:function(){for(var e=["x"],t=new Date(dateRangeController.getStart()),a=new Date(dateRangeController.getEnd()),a=12*(a.getFullYear()-t.getFullYear())+(a.getMonth()-t.getMonth())+1,i=t.getFullYear(),n=t.getMonth()+1,o=a-1;0<o;o--)12<++n&&(i++,n%=12),e.push(i+"-"+(n<10?"0"+n:n)+"-01");return e},toggleExpand:function(e){timeSeriesChart.options.$targetElement.toggleClass("expanded"),timeSeriesChart.options.isExpanded=!timeSeriesChart.options.isExpanded,timeSeriesChart.options.isExpanded?timeSeriesChart.options.$expandBtnElement.html("Collapse"):timeSeriesChart.options.$expandBtnElement.html("Expand"),googleTracking.sendTrackEvent("mainChart","expand toggle"),timeSeriesChart.renderChart()}};class DateRangeControl{constructor(e){this.start_date="2000-01-01",this.end_date="",this.parent=e,this.setHash(),this.setupDateRangePicker(),this.setupDateRangePickerEvents()}setupDateRangePicker(e){e=[{text:"Last 3 Months",dateStart:()=>moment().subtract("months",3),dateEnd:()=>moment()},{text:"Last 6 Months",dateStart:()=>moment().subtract("months",6),dateEnd:()=>moment()},{text:"Last Year",dateStart:()=>moment().subtract("years",1),dateEnd:()=>moment()},{text:"Last 5 Years",dateStart:()=>moment().subtract("years",5),dateEnd:()=>moment()},{text:"All Records",dateStart:()=>moment("2000-01-01"),dateEnd:()=>moment()}];$("#dateRangeJquery").daterangepicker({presetRanges:e,datepickerOptions:{minDate:new Date("2000-01-01"),maxDate:0}})}setupDateRangePickerEvents(){this.setDefaultDate();var e={start:moment(this.start_date).toDate(),end:moment(this.end_date).toDate()};$("#dateRangeJquery").daterangepicker("setRange",e),$("#dateRangeJquery").on("change",()=>{this.changeDateRange(this)}),$("#dateRangeJquery").on("open",()=>this.parent.Utilities.googleTracking.sendTrackEvent("DateRange","OpenDialog"))}open(){$("#dateRangeJquery").daterangepicker("open")}close(){$("#dateRangeJquery").daterangepicker("close")}resetTime(e){this.parent.Utilities.googleTracking.sendTrackEvent("DateRange","Reset");var t=this.getToday();this.setDates("2000-01-01",t)}setDefaultDate(){var e=moment().format("YYYY-MM-DD");this.start_date=this.getCookie("start_date")||"2000-01-01",this.end_date=this.getCookie("end_date")||e}getToday(){var e=new Date,t=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+a}getStart(){return this.start_date}getEnd(){return this.end_date}setHash(){}changeDateRange(e){var t=JSON.parse($("#dateRangeJquery").val()),a=t.start,i=t.end;new Date(a)>new Date(i)&&(t=a,a=i,i=t),e.setDates(a,i)}setDates(e,t){this.setCookie("start_date",e),this.setCookie("end_date",t),this.start_date=e,this.end_date=t,window.CustomEvent&&(new Event("dateRangeChanged"),$("#dateRangeJquery").trigger("dateRangeChanged"),this.parent.Utilities.googleTracking.sendTrackEvent("DateRange","DateChanged"))}setCookie(e,t,a){return this.parent.Utilities.setCookieValue(e,t,a)}getCookie(e){return this.parent.Utilities.getCookieValue(e)}}var hashervar=window.location.hash||"",pagePath=window.location.pathname+hashervar,googleTracking={tracker:void 0,initialize:function(e){googleTracking.tracker=e},sendTrackEvent:function(e,t){arguments.length<3&&ga("send","event",e,t)}};!function(e,t,a,i,n){e.GoogleAnalyticsObject=a,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,i=t.createElement("script"),n=t.getElementsByTagName("script")[0],i.async=1,i.src="//www.google-analytics.com/analytics.js",n.parentNode.insertBefore(i,n)}(window,document,"ga"),ga("create","UA-66360026-1","auto"),ga("send","pageview",pagePath),googleTracking.initialize(ga),$(document).ready(function(){$(".donate").click(function(){googleTracking.sendTrackEvent("Donate","Click")})});class StyleSheetManager{constructor(){this.stylesheets=["css/styles.min.css","css/vendor/normalize.min.css","css/vendor/skeleton.min.css","css/vendor/c3.css","css/vendor/jquery-ui.min.css","css/vendor/jquery.comiseo.daterangepicker.css"],this.loadStylesheets()}loadCSS(e){var t,a;return t=document,a=t.createElement("LINK"),t=t.getElementsByTagName("LINK")[0],a.href=e,a.rel="stylesheet",t.parentNode.insertBefore(a,t),!0}loadStylesheets(e){for(var t=e||this.stylesheets||[],a=!0,i=0;i<t.length;i++)a=this.loadCSS(t[i]),DEBUG&&console.log(t[i]+" Loaded");return a}}var StyleSheetManagerInstance=new StyleSheetManager;function loadCSS(e){DEBUG&&console.warn("Deprecated loadCSS("+e+") function called!"),StyleSheetManagerInstance.loadCSS(e)}