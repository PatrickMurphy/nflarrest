var lastUpdate="12/18/2021, 12:16:45 PM",meter_use_current_day=!0,DataController={options:{dateRange:void 0,data:void 0},init:function(e,t){DataController.options.date_range=e,DataController.options.data=ArrestsCacheTable;var a=function(e,t){var a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-a)/864e5)};DataController.forEach(function(e,t){meter_use_current_day&&(DataController.options.data[t].daysSince=a(new Date(e.Date),new Date),e.daysSince=a(new Date(e.Date),new Date))}),t(this)},forEach:function(e,t,a){t=t||function(){},a=a||!0;for(var n=DataController.options.data.length-1;0<=n;n--){var o=DataController.options.data[n];a?this.dateLimit(o,DataController.options.date_range.getStart(),DataController.options.date_range.getEnd())&&e(o,n):e(o,n)}t()},incrementMap:function(e,t){return e.hasOwnProperty(t)?e[t]=e[t]+1:e[t]=1,e},dateLimit:function(e,t,a){return new Date(e.Date)>=new Date(t)&&new Date(e.Date)<=new Date(a)},getActivePlayerArrests:function(e){e(["no data"])},getMostRecentArrest:function(e){var t,a=DataController,n=999999999;a.forEach(function(e){a.dateLimit(e,DataController.options.date_range.getStart(),DataController.options.date_range.getEnd())&&e.daysSince<n&&(n=(t=e).daysSince)},function(){e(t)})},getTeams:function(e){for(var t=[],a=[],n=new Map,o=DataController.options.data.length-1;0<=o;o--){var r=DataController.options.data[o];t.push({Team:r.Team,Team_preffered_name:r.Team_preffered_name,Team_logo_id:r.Team_logo_id})}for(o=t.length-1;0<=o;o--){var i=t[o];n.has(i.Team)||(n.set(i.Team,!0),a.push(i))}e(a)},getArrestMeter:function(e){var a=0,n=-1,o=0,r=9e9;DataController.forEach(function(e,t){o++,a+=e.DaysToLastArrest,e.DaysToLastArrest>n&&(n=e.DaysToLastArrest),e.DaysSince<r&&(r=e.DaysSince)}),a/=o,e({alltime:{record:Math.floor(n),average:Math.floor(a),raw_average:Math.floor(a)},current:{daysSince:Math.floor(r),probability:Math.exp(-1*r)/a,odds:Math.floor(1/Math.exp(-1*r/a))}})},getDonutChart:function(a,e,t){for(var n={},o=[],r=DataController.options.data.length-1;0<=r;r--){var i=DataController.options.data[r];e(i)&&this.dateLimit(i,DataController.options.date_range.getStart(),DataController.options.date_range.getEnd())&&(n=this.incrementMap(n,i[a]))}Object.keys(n).forEach(function(e){var t={};t[a]=e,t.arrest_count=n[e],o.push(t)}),t(o.sort(function(e,t){return t.arrest_count-e.arrest_count}))},getOverallChart:function(e,t,a,n,o){for(var r={Year:"Year",Month:"Month",Day:"Day_of_Week",DayOrder:"Day_of_Week_int",Team:"Team_preffered_name","Team Code":"Team",Conference:"Team_Conference",Division:"Team_Conference_Division",Position:"Position",Crime:"Crime_category",Season:"Season",SeasonState:"ArrestSeasonState",Measure:"arrest_count"},i=r[t],s=r[e],c=r[a],l=n,d={},g={},m={},p=DataController.options.data.length-1;0<=p;p--){var u=DataController.options.data[p];this.dateLimit(u,DataController.options.date_range.getStart(),DataController.options.date_range.getEnd())&&(d=this.incrementMap(d,u[i]+u[s]),g=this.incrementMap(g,u[i]),m=this.incrementMap(m,u[s]))}var h=[];Object.keys(g).forEach(function(e){h.push({bar:e,arrest_count:g[e]})}),"DESC"==l&&c==i&&h.sort(function(e,t){return t.arrest_count-e.arrest_count});var f=[];Object.keys(m).forEach(function(e){f.push(e)});var v=["x"];h.forEach(function(e){v.push(e.bar)});var w=[];w.push(v),Object.keys(m).forEach(function(n){var o=[n];h.forEach(function(e){var t=e.bar,a=d[t+n];null==a&&(a=0),o.push(a)}),w.push(o)}),o({columns:w,groups:f})},getTopLists:function(e,t,a,n){for(var o=[],r={},i={},s={},c=[],l=[],d=[],g=DataController.options.data.length-1;0<=g;g--){var m=DataController.options.data[g];this.dateLimit(m,DataController.options.date_range.getStart(),DataController.options.date_range.getEnd())&&(r=this.incrementMap(r,m.Category),i=this.incrementMap(i,m.Name),s=this.incrementMap(s,m.Position))}Object.keys(r).forEach(function(e){var t={};t.Category=e,t.arrest_count=r[e],c.push(t)}),Object.keys(i).forEach(function(e){var t={};t.Name=e,t.arrest_count=i[e],l.push(t)}),Object.keys(s).forEach(function(e){var t={};t.Position=e,t.arrest_count=s[e],d.push(t)});var p=function(e,t){return t.arrest_count-e.arrest_count};o.push(c.sort(p).slice(e,e+5)),o.push(l.sort(p).slice(e,e+5)),o.push(d.sort(p).slice(e,e+5)),n(o)},getArrests:function(t,e){var a=[],n=this;n.forEach(function(e){n.dateLimit(e,DataController.options.date_range.getStart(),DataController.options.date_range.getEnd())&&t(e)&&a.push(e)},function(){e(a)})}};function setCookieValue(e,t,a){var n=new Date;a=a||.5,n.setTime(n.getTime()+24*a*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+o}function getCookieValue(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var o=a[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function gaEvent(e,t,a,n,o){googleTracking.sendTrackEvent(a,n)}function setupFacebook(){var e,t,a,n;console.log("FB Setup"),window.fbAsyncInit=function(){FB.init({appId:"563956043742586",xfbml:!0,version:"v2.4"}),FB.Event.subscribe("edge.create",function(e){gaEvent("send","social","facebook","like",e)}),FB.Event.subscribe("edge.remove",function(e){gaEvent("send","social","facebook","unlike",e)}),FB.Event.subscribe("message.send",function(e){gaEvent("send","social","facebook","send",e)})},e=document,t="facebook-jssdk",n=e.getElementsByTagName("script")[0],e.getElementById(t)||((a=e.createElement("script")).id=t,a.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(a,n))}function setupTwitter(){var e,t,a,n,o;console.log("twitter setup"),window.twttr=(e=document,t="twitter-wjs",n=e.getElementsByTagName("script")[0],o=window.twttr||{},e.getElementById(t)||((a=e.createElement("script")).id=t,a.src="https://platform.twitter.com/widgets.js",n.parentNode.insertBefore(a,n),o._e=[],o.ready=function(e){o._e.push(e)}),o),twttr.ready(function(e){e.events.bind("tweet",function(e){if(e){var t=window.location.href;e.target&&"IFRAME"==e.target.nodeName&&(t=extractParamFromUri(e.target.src,"url")),gaEvent("send","social","twitter","tweet",t),console.log("thanks for sharing",t)}})})}function update_hash(){var e=window.location.pathname.split("/");return pageID=window.location.hash||extractParamFromUri(window.location.search,"id")||e.pop()||e.pop()||"#!ID Not Set",pageID=decodeURI(pageID),pageID=pageID.replace("#!",""),pageID=pageID.replace("#",""),$("#pageTitle").append(pageID),pageID}function extractParamFromUri(e,t){if(!e)return null;var a=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);return null!=a?decodeURI(unescape(a[1])):null}function saveCanvasAsPNG(e){var t=document.getElementById(e).toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}window.mobileCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t};var timeSeriesChart={timeChart:void 0,options:{targetElement:"#theElementSelector",compareToBtn:"#btnSelector",initColumnID:"",data:{},isExpanded:!(window.mobileAndTabletCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}),showAccumulation:!1,ajaxURL:"/api/"},init:function(e){$.extend(!0,this.options,e);var t=this;console.log("Initialize Chart:  "+this.options.targetElement),t.options.$targetElement=$(this.options.targetElement),t.options.$expandBtnElement=$(this.options.targetExpandBtn),timeSeriesChart.options.$expandBtnElement.off("click"),timeSeriesChart.options.$expandBtnElement.click(function(){t.toggleExpand(t)}),t.renderChart()},renderChart:function(){if($(document).width()<800)var e=20;else e=6;timeSeriesChart.timeChart=c3.generate({bindto:timeSeriesChart.options.targetElement,data:{x:"x",columns:[timeSeriesChart.getXDates(),timeSeriesChart.fillDates(timeSeriesChart.options.initColumnID,timeSeriesChart.options.data)]},axis:{x:{type:"timeseries",tick:{format:"%m/%y"}}},padding:{bottom:e},color:{pattern:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF","#154F78","#B0580A","#248224","#7D1717"]}})},buildAjaxURL:function(e,t){t=t||{};var a={id:e,start_date:dateRangeController.getStart(),end_date:dateRangeController.getEnd()};if($.extend(a,t),timeSeriesChart.options.ajaxURL.indexOf("?")<0)var n="?";else n="&";for(var o in a)n+=o+"="+a[o]+"&";return n=n.substring(0,n.length-1),timeSeriesChart.options.ajaxURL+n},addColumn:function(a){googleTracking.sendTrackEvent("TimeChart","addCompare "+a);var e=timeSeriesChart.buildAjaxURL(a);$.getJSON(e,function(e){var t=timeSeriesChart.fillDates(a,e);t[0];timeSeriesChart.timeChart.load({columns:[t]})})},fillDates:function(e,t){e=e||"",t=(t=t||[]).reverse();var a,n=new Date(dateRangeController.getStart()),o=new Date(dateRangeController.getEnd()),r=12*(o.getFullYear()-n.getFullYear())+(o.getMonth()-n.getMonth())+1,i=n.getFullYear(),s=n.getMonth()+1,c=[e.toString()],l=0,d=t.pop();for(a=r;0<a;a--){var g,m;if(void 0!==d)if(12<++s&&(i++,s%=12),d.Year==i.toString()&&d.Month==s.toString())g=timeSeriesChart.options.showAccumulation?l+=parseInt(d.arrest_count):parseInt(d.arrest_count),c.push(g),0<t.length&&(d=t.pop());else m=timeSeriesChart.options.showAccumulation?l:0,c.push(m);else c.push(0)}return c},getXDates:function(){var e,t=["x"],a=new Date(dateRangeController.getStart()),n=new Date(dateRangeController.getEnd()),o=12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())+1,r=a.getFullYear(),i=a.getMonth()+1;for(e=o-1;0<e;e--){if(12<++i&&(r++,i%=12),i<10)var s="0"+i;else s=i;t.push(r+"-"+s+"-01")}return t},toggleExpand:function(e){timeSeriesChart.options.$targetElement.toggleClass("expanded"),timeSeriesChart.options.isExpanded=!timeSeriesChart.options.isExpanded,timeSeriesChart.options.isExpanded?timeSeriesChart.options.$expandBtnElement.html("Collapse"):timeSeriesChart.options.$expandBtnElement.html("Expand"),googleTracking.sendTrackEvent("mainChart","expand toggle"),timeSeriesChart.renderChart()}},dateRangeController={start_date:"2000-01-01",end_date:"",init:function(e){"undefined"!=typeof pageID&&pageID;$("#dateRangeJquery").daterangepicker({presetRanges:[{text:"Last 3 Months",dateStart:function(){return moment().subtract("months",3)},dateEnd:function(){return moment()}},{text:"Last 6 Months",dateStart:function(){return moment().subtract("months",6)},dateEnd:function(){return moment()}},{text:"Last Year",dateStart:function(){return moment().subtract("years",1)},dateEnd:function(){return moment()}},{text:"Last 5 Years",dateStart:function(){return moment().subtract("years",5)},dateEnd:function(){return moment()}},{text:"All Records",dateStart:function(){return moment("2000-01-01")},dateEnd:function(){return moment()}}],datepickerOptions:{minDate:new Date("2000-01-01"),maxDate:0}});var t=moment().format("YYYY-MM-DD");this.start_date=this.getCookie("start_date")||"2000-01-01",this.end_date=this.getCookie("end_date")||t,$("#dateRangeJquery").daterangepicker("setRange",{start:moment(this.start_date).toDate(),end:moment(this.end_date).toDate()}),$("#dateRangeJquery").on("change",this.changeDateRange),$("#dateRangeJquery").on("open",function(){googleTracking.sendTrackEvent("DateRange","OpenDialog")}),e(this)},open:function(){$("#dateRangeJquery").daterangepicker("open")},close:function(){$("#dateRangeJquery").daterangepicker("close")},resetTime:function(e){googleTracking.sendTrackEvent("DateRange","Reset"),e=e||!1;var t=dateRangeController.getToday();dateRangeController.setDates("2000-01-01",t)},getToday:function(){var e,t,a=new Date;return e=a.getMonth()<9?"0"+(a.getMonth()+1):a.getMonth()+1,t=a.getDate()<10?"0"+a.getDate():a.getDate(),a.getFullYear()+"-"+e+"-"+t},getStart:function(){return this.start_date},getEnd:function(){return this.end_date},changeDateRange:function(){var e=JSON.parse($("#dateRangeJquery").val());console.log(e);var t=e.start,a=e.end;if(new Date(t)>new Date(a)){var n=t;t=a,a=n}dateRangeController.setDates(t,a)},setDates:function(e,t){if(dateRangeController.setCookie("start_date",e),dateRangeController.setCookie("end_date",t),dateRangeController.start_date=e,dateRangeController.end_date=t,window.CustomEvent){new Event("dateRangeChanged");$("#dateRangeJquery").trigger("dateRangeChanged"),googleTracking.sendTrackEvent("DateRange","DateChanged")}},setCookie:function(e,t,a){return setCookieValue(e,t,a)},getCookie:function(e){return getCookieValue(e)}},hashervar=window.location.hash||"",pagePath=window.location.pathname+hashervar,googleTracking={tracker:void 0,initialize:function(e){googleTracking.tracker=e},sendTrackEvent:function(e,t){arguments.length<3&&ga("send","event",e,t)}};function loadCSS(e){var t,a,n;t=document,a=t.createElement("LINK"),n=t.getElementsByTagName("LINK")[0],a.href=e,a.rel="stylesheet",n.parentNode.insertBefore(a,n)}!function(e,t,a,n,o,r,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,r=t.createElement("script"),i=t.getElementsByTagName("script")[0],r.async=1,r.src="//www.google-analytics.com/analytics.js",i.parentNode.insertBefore(r,i)}(window,document,0,0,"ga"),ga("create","UA-66360026-1","auto"),ga("send","pageview",pagePath),googleTracking.initialize(ga),$(document).ready(function(){$(".donate").click(function(){googleTracking.sendTrackEvent("Donate","Click")})}),loadCSS("css/styles.min.css"),loadCSS("css/vendor/normalize.min.css"),loadCSS("css/vendor/skeleton.min.css"),loadCSS("css/vendor/c3.css"),loadCSS("css/vendor/jquery-ui.min.css"),loadCSS("css/vendor/jquery.comiseo.daterangepicker.css");